<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7Y4FNYEEZ2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7Y4FNYEEZ2');
</script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>咖啡机</title>
    <!-- Favicons -->
    <link href="img/index/icon.png" rel="icon">
    <link href="img/index/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Bootstrap CSS File -->
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Libraries CSS Files -->
    <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/magnific-popup/magnific-popup.css" rel="stylesheet">
    <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="./css/navbar.css" rel="stylesheet">


    <link rel="stylesheet" href="./css/timeline.css" />

</head>

<body>
    <!--==========================
    Header
  ============================-->

    <header id="header">
        <div class="container">
            <div id="logo">
                <a href="/index.html"><img class="logo1" src="./img/index/logo.png"></a>
            </div>


            <nav id="nav-menu-container">
                <ul class="nav-menu">
                    <li><a href="./index.html">首页</a></li>
                    <li><a href="./timeline.html">咖啡机</a></li>
                    <li><a href="./term.html">咖啡烘焙机</a></li>
                    <li><a href="./device.html">咖啡包装机</a></li>
                    <li><a href="./VRUP.html">咖啡豆精选设备</a></li>
                    <li><a href="./gallery.html">咖啡豆输送设备</a></li>
                    <li><a href="./me.html">关于天山</a></li>
                </ul>
            </nav><!-- #nav-menu-container -->
        </div>
    </header><!-- #header -->


    <div class="shell" id="shell">
        <div class="header">
            <h2 class="title">咖啡机</h2>
            <h3 class="subtitle">天山</h3>
        </div>
        <div class="timeline">
            <div class="item" data-text="国产烘焙机">
                <div class="content">
                    <img src="./img/timeline/美丽新世界.webp" class="img">
                    <h2 class="content-title">1932</h2>
                    <p class="content-desc">
                        高端定制双锅炉咖啡机
                    </p>
                </div>
            </div>
            <div class="item" data-text="第一款头戴式VR出现">
                <div class="content">
                    <img src="./img/timeline/vr1.webp" class="img">
                    <h2 class="content-title">1968</h2>
                    <p class="content-desc">
                        科学家米拉
                    </p>
                </div>
            </div>
            <div class="item" data-text="“VR”一词首次出现">
                <div class="content">
                    <img src="./img/timeline/VR2.webp" class="img">
                    <h2 class="content-title">198X</h2>
                    <p class="content-desc">
                        公司创建人MILA
                    </p>
                </div>
            
            </div>
            <div class="item" data-text="未完待续...">
                <div class="content">
                    <img src="./img/timeline/1.webp" class="img">
                    <h2 class="content-title">未完待续</h2>
                    <p class="content-desc">
                        未完待续...
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="beian">
        <div>
            <a href="mailto:salses@imila.cn">salses@imila.cn</a>
        </div>
        <div>
            <a href="https://imila.cn" target="_blank">米拉咖啡</a>
        </div>
    </div>
    <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>







    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script>
        (function ($) {
            $(window).scrollTop(0)
            $.fn.timeline = function () {
                var selectors = {
                    id: $(this),
                    item: $(this).find(".item"),
                    activeClass: "item--active",
                    img: ".img"
                };
                // 将第一个时间轴项目激活，并设置时间轴背景图片为第一个项目的图片
                selectors.item.eq(0).addClass(selectors.activeClass);
                selectors.id.css(
                    "background-image",
                    "url(" +
                    selectors.item.first()
                        .find(selectors.img)
                        .attr("src") +
                    ")"
                );
                // 获取时间轴项目的总数
                var itemLength = selectors.item.length;
                // 当页面滚动时，触发滚动事件
                let timer;
                $(window).scroll(function (e) {

                    timer && clearTimeout(timer);
                    timer = setTimeout(function () {
                        var max, min;
                        // 获取页面滚动的距离
                        var pos = $(this).scrollTop();
                        selectors.item.each(function (i) {
                            // 获取当前时间轴项目的最小和最大高度
                            min = $(this).offset().top;
                            max = $(this).height() + $(this).offset().top;
                            var that = $(this);
                            // 如果滚动到最后一个项目，并且超过了当前项目高度的一半，
                            // 则将最后一个项目设置为激活状态，并设置背景图片为最后一个项目的图片
                            if (i == itemLength - 2 && pos > min + $(this).height() / 2) {

                                selectors.item.removeClass(selectors.activeClass);
                                selectors.id.css(
                                    "background-image",
                                    "url(" +
                                    selectors.item.last()
                                        .find(selectors.img)
                                        .attr("src") +
                                    ")"
                                );
                                selectors.item.last().addClass(selectors.activeClass);
                            }
                            // 如果当前滚动位置在当前项目的最小和最大高度之间，
                            // 则将当前项目设置为激活状态，并设置背景图片为当前项目的图片
                            else if (pos <= max - 200 && pos >= min - 120) {
                                console.log(max)
                                selectors.id.css(
                                    "background-image",
                                    "url(" +
                                    $(this)
                                        .find(selectors.img)
                                        .attr("src") +
                                    ")"
                                );
                                selectors.item.removeClass(selectors.activeClass);
                                $(this).addClass(selectors.activeClass);
                            }
                        }, 500)

                    });


                });

            };
        })(jQuery)
        /*
        最后，我们调用 timeline 插件并传入时间轴的 ID 作为参数。
        这将启用时间轴插件并为该时间轴绑定滚动事件。
        */
        $("#shell").timeline();

        function debounce(fn, wait) {
            var timer = null;
            return function () {
                if (timer !== null) {
                    clearTimeout(timer);
                }
                timer = setTimeout(fn, wait);
            }
        }
    </script>
    <!-- JavaScript  -->
    <script src="lib/jquery/jquery.min.js"></script>
    <script src="lib/jquery/jquery-migrate.min.js"></script>
    <script src="lib/superfish/superfish.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/sticky/sticky.js"></script>
    <script src="js/main.js"></script>
    <script src="lib/easing/easing.min.js"></script>
</body>

</html>
